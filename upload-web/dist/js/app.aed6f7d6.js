(function(e){function t(t){for(var r,i,a=t[0],s=t[1],u=t[2],p=0,f=[];p<a.length;p++)i=a[p],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&f.push(n[i][0]),n[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);c&&c(t);while(f.length)f.shift()();return l.push.apply(l,u||[]),o()}function o(){for(var e,t=0;t<l.length;t++){for(var o=l[t],r=!0,a=1;a<o.length;a++){var s=o[a];0!==n[s]&&(r=!1)}r&&(l.splice(t--,1),e=i(i.s=o[0]))}return e}var r={},n={app:0},l=[];function i(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=r,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(o,r,function(t){return e[t]}.bind(null,r));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var c=s;l.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"3c1f":function(e,t,o){"use strict";o("c634")},"56d7":function(e,t,o){"use strict";o.r(t);o("cadf"),o("551c"),o("f751"),o("097d");var r=o("2b0e"),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("Upload")],1)},l=[],i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",[o("el-header",[e._v("上传车辆信息")]),o("el-main",[o("el-form",{attrs:{"label-position":"right","label-wIdth":"80px"}},[o("el-input",{attrs:{type:"hidden"},model:{value:e.formItem.chipId,callback:function(t){e.$set(e.formItem,"chipId",t)},expression:"formItem.chipId"}}),o("el-form-item",{attrs:{label:"车牌号"}},[o("input-car",{on:{submit:e.getPlateNumber}})],1),o("el-form-item",{attrs:{label:"驾驶员"}},[o("el-input",{attrs:{type:"text",placeholder:"请输入驾驶员性名"},model:{value:e.formItem.driverName,callback:function(t){e.$set(e.formItem,"driverName","string"===typeof t?t.trim():t)},expression:"formItem.driverName"}})],1),o("el-upload",{ref:"uploadImg",staticClass:"upload-demo",attrs:{action:"#","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"auto-upload":!1,"before-upload":e.beforeUpload,limit:1,accept:"image/*","http-request":e.upload,"list-type":"picture"}},[o("el-button",{attrs:{size:"medium",type:"primary"}},[e._v("上传车辆照片"),o("i",{staticClass:"el-icon-upload el-icon--right"})]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n            只能上传jpg/png文件\n            "),o("br"),e._v("只能上传一张图片\n            "),o("br"),e._v("且图片大小不能超过15M\n          ")])],1),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("提交")])],1)],1),o("el-footer",[e._v("Copyright©blctek.com")])],1)},a=[],s=o("bc3a"),u=o.n(s);function c(e){var t=u.a.create({baseURL:"http://upload-server.yueke.cloud/",timeout:5e3});return t.interceptors.response.use((function(e){return console.log("interceptors.response.onFulfilled->",e),e.data}),(function(e){throw console.log("interceptors.response.onRejected->",e),e})),t(e)}function p(e,t){var o=new FormData;o.append("file",e.file),o.append("chipId",t.chipId),o.append("plateNumber",t.plateNumber),o.append("driverName",t.driverName),console.log("准备上传的文件->",o.get("file")),console.log("准备上传的芯片编号->",o.get("chipId")),console.log("准备上传的车牌号->",o.get("plateNumber")),console.log("准备上传的驾驶员姓名->",o.get("driverName"));var r={url:"/car/upload",method:"POST",headers:{"Content-Type":"multipart/form-data"},data:o};return c(r)}var f={name:"Upload",components:{},data:function(){return{formItem:{chipId:11,plateNumber:"",driverName:""},fileList:[]}},methods:{handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},getPlateNumber:function(e){console.log(e),this.formItem.plateNumber=e,console.log(this.formItem.plateNumber)},beforeUpload:function(e){var t=e.size/1024/1024,o=15;return e.size>0&&e.size<=1048576?console.log("准备上传文件大小->",(e.size/1024).toFixed(2)+"Kb"):e.size>1048576&&console.log("准备上传文件大小->",(e.size/1024/1024).toFixed(2)+"M"),t<o||this.$message({type:"error",message:"请上传小于15M的图片",offset:"100"}),console.log("是否小于"+o+"M->",t<o),t<o},upload:function(e){var t=this;0!==this.formItem.chipId&&""!==this.formItem.plateNumber&&""!==this.formItem.driverName?p(e,this.formItem).then((function(e){console.log("上传成功->",e),t.$notify({title:"成功",message:"您的车辆信息已经上传成功",type:"success",offset:100})})).catch((function(e){console.log("上传失败->",e),t.$notify({title:"失败",message:"您的车辆信息上传失败，请联系管理员",type:"error",offset:100})})):this.$notify({title:"失败",message:"请将车辆信息填写完整",type:"error",offset:100})},submitForm:function(){this.$refs.uploadImg.submit()}}},d=f,m=(o("3c1f"),o("2877")),h=Object(m["a"])(d,i,a,!1,null,"89717008",null),b=h.exports,v={name:"app",components:{Upload:b}},g=v,y=Object(m["a"])(g,n,l,!1,null,null,null),I=y.exports,_=o("5c96"),w=o.n(_),N=(o("0fae"),o("fcb3")),x=o.n(N);o("6a21");r["default"].use(w.a),r["default"].use(x.a),r["default"].config.productionTip=!1,new r["default"]({render:function(e){return e(I)}}).$mount("#app")},c634:function(e,t,o){}});
//# sourceMappingURL=app.aed6f7d6.js.map